[
  {
    "objectID": "my_trabajo_BigData.html",
    "href": "my_trabajo_BigData.html",
    "title": "Análisis de la Industria Musical: Spotify",
    "section": "",
    "text": "Spotify es una empresa de servicios multimedia sueca fundada en 2006, cuyo producto es la aplicación homónima empleada para la reproducción de música vía streaming. Su modelo de negocio es el denominado freemium, que consiste en ofrecer un servicio gratuito básico y con publicidad y otro con características adicionales (como una mejor calidad de audio, libre de publicidad y de uso ilimitado) a través de una suscripción de pago.\nLa música que está en la plataforma se puede buscar mediante temas, como el artista que la compuso, el álbum o el género al que pertenece, y puede ordenarse por listas de reproducción o etiquetas de grabación. Los usuarios pueden crear, editar y compartir estas listas en las redes sociales y crearlas además en conjunto con otros usuarios.\nPara obtener más información, consulte la página oficial de Spotify."
  },
  {
    "objectID": "my_trabajo_BigData.html#datos-usados",
    "href": "my_trabajo_BigData.html#datos-usados",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Datos usados",
    "text": "Datos usados\nLos datos del trabajo han sido extraídos de diversas fuentes como pueden ser el Eurostat, la UNESCO o la OECD. Está última ha sido la que más datos nos ha proporcionado para realizar el trabajo, pues es de donde se han extraído los principales datos de las pruebas PISA y del gasto en educación.\nPor otro lado, los datos se han obtenido en formato csv en su conjunto, el cual es un buen formato para poder empezar a trabajar con ellos (en nuestra opinión el mejor) ya que con otros formatos como excel hemos tenido problemas a la hora de editarlos y poder manejarlos correctamente."
  },
  {
    "objectID": "my_trabajo_BigData.html#códigos",
    "href": "my_trabajo_BigData.html#códigos",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Códigos",
    "text": "Códigos\n\nCódigo\n#ESTOS SON LOS PAQUETES QUE HEMOS UTILIZADO A LO LARGO DEL TRABAJO\n\nlibrary(tidyr)\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nlibrary(countrycode)\nlibrary(gganimate)\nlibrary(ggimage)\nlibrary(ggthemes)\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(ggThemeAssist)\nlibrary(mapdata)\nlibrary(maps)\nlibrary(ggrepel)\nlibrary(tmap)\nlibrary(treemap)\nlibrary(tweetrmd)\nlibrary(gridExtra)\nlibrary(glue)\nlibrary(sjPlot)\nlibrary(devtools)\nlibrary(gclus)\nlibrary(corrplot)\n\n\n\n# PRIMERO CARGAMOS LOS DATOS QUE POSTERIORMENTE TRANSFORMAREMOS PARA PODER ANALIZARLOS MEJOR\n\nintro1 <- read.csv(\"datos/aaa.csv\") \neducacion_gasto_PIB <- read.csv(\"datos/Datos_educacion_PST.csv\")\neducacion_segmento <- read.csv(\"datos/Datos_educacion_completo.csv\")\ngasto_total_educacion_PIB <- read.csv(\"datos/gasto_total_y_publico.csv\")\ngasto_total_educ <- read.csv(\"datos/gasto_total_y_publico.csv\")\nconfianza_gobierno <- read.csv(\"datos/gobierno_aprobacion.csv\")\neurostat_p <- read.csv(\"datos/presupuesto.csv\")\npisa_ciencias<- read.csv(\"./datos/pisa_ciencias.csv\")\npisa_mates <- read.csv(\"./datos/pisa_mates.csv\")\npisa_lectura <- read.csv(\"./datos/pisa_lectura.csv\")\n\n\n#AHORA LOS TRANSFORMAMOS \n\ndf <- pisa_mates %>% select(1,3,6,7)\ndf1<-pisa_ciencias %>% select(1,3,6,7)\ndf1 <- df1 %>% rename(ciencia=Value)\ndf <- df %>% rename (mates=Value)\npisa_lectura <- pisa_lectura %>% select(LOCATION, SUBJECT,TIME, Value)\npisa_lectura <- pisa_lectura %>% rename(Lectura=Value)\npisa<- inner_join(df,df1)\npisa <- inner_join(pisa, pisa_lectura)\nnoborrar<- c(\"pisa\")\nrm(list=ls()[!ls()%in%noborrar])\nrio::export(pisa,\"./datos/pisa.xlsx\")\n\na<- pisa %>% filter(SUBJECT==\"TOT\")\n\nb <- pisa %>% filter(SUBJECT==\"TOT\") %>% group_by(LOCATION) %>% summarise(media_mates= mean(mates), media_ciencias = mean (ciencia), media_lectura = mean (Lectura))\nmejores_mates <- b%>% slice_max(media_mates, n=5)\nmejores_ciencias<- b %>% slice_max(media_ciencias, n=5)\nmejores_lectura <- b %>% slice_max(media_lectura, n=5)\nVECINOS<- b %>% filter(LOCATION==\"ESP\" | LOCATION==\"ITA\"| LOCATION==\"PRT\"| LOCATION ==\"GRC\" | LOCATION == \"FRA\")\n\n\ndatos_gt_movil <- pisa %>% filter(SUBJECT==\"TOT\") %>% filter(LOCATION==\"ESP\" | LOCATION==\"ITA\"| LOCATION==\"PRT\"| LOCATION ==\"GRC\" | LOCATION == \"FRA\")  %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                                                                                                                      origin = \"iso3c\", \n                                                                                                                                                                                      destination = \"iso2c\", warn = FALSE))\n\ndatos_gt_movil_long <- datos_gt_movil %>% tidyr::pivot_longer(cols = 4:6,\n                                                              names_to = \"pruebas\",\n                                                              values_to = \"notas\" )\n\n#GRAFICA\n\nw <- full_join(VECINOS,mejores_mates)\nw <- full_join(w,mejores_ciencias)\nw <- full_join(w, mejores_lectura)"
  },
  {
    "objectID": "my_trabajo_BigData.html#análisis-de-datos",
    "href": "my_trabajo_BigData.html#análisis-de-datos",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Análisis de datos",
    "text": "Análisis de datos\n\nCódigo#españa  y sus vecinos junto a los mejores 5 mejores de mates\n\nz<-full_join(VECINOS, mejores_mates)\nz <- z %>% \n  mutate(media_mate = forcats::as_factor(media_mates), media_lecture = forcats::as_factor(media_lectura), media_cience = forcats::as_factor(media_ciencias)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                     origin = \"iso3c\", \n                                                                                     destination = \"iso2c\", warn = FALSE))\n\n\nz %>%\n  arrange(media_mates) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_matef=factor( media_mates, levels=media_mate)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_matef))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +labs(title='Los 5 mejores en matemáticas', \n                   subtitle='junto a España y sus vecinos', \n                   caption='Fuente: OCDE',\n                  x= \"Paises\", y='Notas')+theme_bw()\n\n#españa  y sus vecinos junto a los mejores 5 mejores de lectura\nza<-full_join(VECINOS, mejores_lectura)\nza <-za %>% \n  mutate( media_lecture = forcats::as_factor(media_lectura)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                                                                                                                           origin = \"iso3c\", \n                                                                                                                                                                                           destination = \"iso2c\", warn = FALSE))\n\nza %>%\n  arrange(media_lecture) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_lecturef=factor( media_lectura, levels=media_lecture)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_lecturef))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +\n  theme_bw()  +labs(title='Los 5 mejores en Lectura', \n                     subtitle='junto a España y sus vecinos', \n                     caption='Fuente: OCDE',\n                     x= \"Paises\", y='Notas')\n\n\n# España  y sus vecinos junto a los mejores 5 mejores de ciencia\n\nzb<-full_join(VECINOS, mejores_ciencias)\nzb <-zb %>% \n  mutate( media_ciencie = forcats::as_factor(media_ciencias)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                            origin = \"iso3c\", \n                                                                                            destination = \"iso2c\", warn = FALSE))\n\nzb %>%\n  arrange(media_ciencias) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_ciencief=factor( media_ciencias, levels=media_ciencie)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_ciencief))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +\n  theme_bw() +labs(title='Los 5 mejores en Ciencias', \n                   subtitle='junto a España y sus vecinos', \n                   caption='Fuente: OCDE',\n                   x= \"Paises\", y='Notas')\n\n\n\ndf_flags <- w %>% #- fips\n  mutate(iso2 = countrycode(sourcevar = LOCATION, \n                            origin = \"iso3c\", \n                            destination = \"iso2c\", warn = FALSE)) %>% \n  mutate(iso2 = tolower(iso2)) %>% \n  # glue:glue() : pega texto con \"código\", con objetos de R: los objetos tienen que ir entre corchetes {}\n  mutate(flag_URL = glue::glue('https://hatscripts.github.io/circle-flags/flags/{iso2}.svg'), .before=LOCATION) \ntt_flags <- df_flags%>% select(-6) %>% gt()\n\n\ntt_flags <- tt_flags %>% tab_header(title = md(\"**España junto a sus vecinos y los 9 Paises con mejores medias en las pruebas Pisa**\"),\n                                subtitle = md(\"Datos de *Hombres y Mujeres*\"))\n\ntt_flags <- tt_flags %>% cols_label(media_mates = md(\"**Matemáticas**\"), LOCATION= md(\"**Paises**\"), media_ciencias = md(\"**Ciencias**\"), media_lectura = md(\"**Lectura**\"),flag_URL = md(\"**Banderas**\")) \ntt_flags <- tt_flags %>% \n  fmt_number(columns = c(media_mates, media_ciencias, media_lectura),\n             decimals =2, \n             sep_mark = \".\", \n             dec_mark = \",\") \n\ntabla<- tt_flags %>% \n  gt::text_transform(locations = cells_body(columns = c(flag_URL)), \n                     fn = function(x){gt::web_image(x, height = 30)})\ntabla<- tabla %>% opt_stylize(style = 1, color = \"red\")  #- red\ntabla\n\n\n\n\n\n\n\nEspaña junto a sus vecinos y los 9 Paises con mejores medias en las pruebas Pisa\n    \n\nDatos de Hombres y Mujeres\n\n    \n\n\nBanderas\n      Paises\n      Matemáticas\n      Ciencias\n      Lectura\n    \n\n\n\nESP\n483,25\n491,25\n481,50\n\n\n\nFRA\n495,20\n496,00\n496,20\n\n\n\nGRC\n456,60\n463,40\n468,80\n\n\n\nITA\n481,40\n481,40\n481,20\n\n\n\nPRT\n484,80\n489,80\n487,80\n\n\n\nSGP\n564,00\n556,00\n535,00\n\n\n\nHKG\n548,00\n523,00\n527,00\n\n\n\nMAC\n544,00\n529,00\n509,00\n\n\n\nTWN\n542,00\n532,00\n497,00\n\n\n\nKOR\n539,40\n526,60\n532,40\n\n\n\nFIN\n525,20\n543,00\n530,60\n\n\n\nJPN\n529,40\n536,80\n515,20\n\n\n\nEST\n518,20\n532,80\n512,00\n\n\n\nCAN\n520,00\n526,80\n524,20\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nComo podemos observar, España y sus vecinos están muy lejos de estar entre los mejores de cada prueba, pudiendo destacar que Francia es superior en todas las pruebas si lo comparamos con España,Grecia, Italia y Portugal.\nEn la prueba de matemáticas, el quinto mejor es Corea del sur, con una media de 539,4 y el mas cercano de los vecinos de España es Francia, con 495,2 y España con 483,2 por debajo de Portugal. Siendo el mejor Singapur con 564 de media, la diferencia es increíble, segundo Hong Kong y tercero Macao.\nEn la prueba de Ciencias, el quinto mejor es Taiwan, con una media de 532, luego observamos a Francia con 496 y España con 491,25 superando a Portugal, Italia y a Grecia. El mejor en esta prueba vuelve a ser Singapur con 556, segundo Finlandia y tercero Japón.\nEn la prueba de Lectura, el quinto mejor es Canadá con 524,2 luego observamos a Francia con 496,2 que esta vez la distancia es mucho menor, luego tenemos a Portugal que supera a España por casi 7 puntos y les siguen Italia y Grecia. El mejor en esta prueba vuelve a ser Singapur con 535, segundo Corea y tercero Finlandia.\nPodemos observar que existe una notable diferencia entre los países asiáticos y los europeos, el único país europeo que podemos apreciar que se encuentra entre los mejores es Finlandia. España está muy por debajo y entre los cinco 4 vecinos que hemos escogido podemos ver que en dos de las tres pruebas, España se encuentra peor que Francia y que Portugal ."
  },
  {
    "objectID": "my_trabajo_BigData.html#evolución-de-las-notas-de-las-pruebas-pisa",
    "href": "my_trabajo_BigData.html#evolución-de-las-notas-de-las-pruebas-pisa",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Evolución de las notas de las pruebas PISA",
    "text": "Evolución de las notas de las pruebas PISA\n\nCódigo# Grafica final\n\ndatos_gt_movil_long <- datos_gt_movil %>% tidyr::pivot_longer(cols = 4:6,\n                                                              names_to = \"pruebas\",\n                                                              values_to = \"notas\" )\ndatos_gt_movil_long <- datos_gt_movil_long %>%\n  mutate(prueba = case_when( \n    pruebas==\"mates\"  ~ \"Matemáticas\",\n    pruebas==\"ciencia\"  ~ \"Ciencias\" ,\n    pruebas==\"Lectura\" ~ \"Lectura\"\n  )) %>% select(-pruebas)\n\ngrafico2<- ggplot( data= datos_gt_movil_long, aes(x=TIME, y=notas)) + geom_line( aes(color= LOCATION) , size=1) +\n   theme_ipsum() + geom_flag(aes(image = iso2))+ \n   labs(title='Evolución de las notas de la prueba PISA', \n       subtitle='España y sus vecinos', \n       caption='Proceedings of the National Academy of Sciences, 104 (3):1051-1056, 2007',\n       x='Año', y='Notas')+ \n   transition_reveal(TIME)+\n   theme(plot.title=element_text(family='Anton', size=20),\n         plot.subtitle=element_text(family='Anton'),\n         axis.title.x = element_text(family='Anton', face='bold', hjust=1),\n         axis.title.y = element_text(family='Anton', face='bold', hjust=1))+\n   view_follow()  + theme(panel.grid.major = element_line(colour = \"gray87\",\n                                                                      linetype = \"dashed\"), panel.background = element_rect(fill = \"darkolivegreen\"), legend.position='none') + facet_wrap(vars(prueba), nrow = 1, ncol= 3)\n \n animate(grafico2, width=1000, height=500, fps=10)\n \n\n\n\n\n\n\n\nEn la prueba de Ciencias, observamos como en 2006 España era el segundo mejor de los 5, siendo superado solo por Francia. Es bastante curioso el increíble crecimiento que experimenta Portugal e Italia en los primeros años de la serie. En 2012 Italia obtiene su mayor nota en cuanto a ciencias, con 494. posicionándose como tercera, por detrás de Portugal y Francia. Portugal en 2015 es cuando obtiene su nota más alta, 501, pero posteriormente tanto Portugal como Italia experimentan un descenso notable. Por otra parte, tenemos a Grecia, país que desde que la serie empieza no hace nada más que caer, pasando de 473 en 2006 a tener 452 en 2018.\nEn la prueba de Matemáticas, se aprecia algo similar a la prueba de ciencias, Francia parte como primera, Portugal e Italia experimentan un incremento bastante palpable, Portugal pasando de 466 en 2006 a 492 en 2018 e Italia pasando de 462 en 2006 a 487 en 2018. España se mantiene prácticamente plana y Grecia experimenta una pequeña mejora y luego se hunde.\nEn la prueba de lectura, observamos que los primeros años de la serie todos los países observan un incremento en sus notas hasta 2009, cuando curiosamente se empieza a sufrir la gran recesión. Pero es bastante raro que España y Portugal a diferencia de sus vecinos no vieran sus notan descender sino al contrario. España pasó de 461 en 2006 a 496 en 2015. Portugal pasó de 472 en 2006 a 492 en 2015, llegando a obtener 498 en 2015. Francia pasó de 488 en 2006 a 493 en 2018 llegando a su máximo en 2012 con 505. Italia pasó de 469 en 2006 a 476 en 2018 y Grecia pasó de 460 en 2006 a 457 en 2018, llegando a tener 483 en 2009. Por tanto, viéndolo de manera general, el único país que está peor que en 2006 es Grecia.\nDe manera general podemos ver que la mayoría de países experimenta un incremento en sus notas en los primeros años de la serie, luego se observa un descenso generalizado aproximadamente en 2012 y luego se observa una reversión de esa tendencia y los países vuelve a recuperar en parte lo perdido, lo que nos llevaría a la siguiente parte de este trabajo, donde buscaremos responder a la siguiente pregunta:\n¿Tiene alguna relación las notas que los países sacan en las pruebas PISA con el gasto que los países destinan a educación?"
  },
  {
    "objectID": "las_slides_estan.html",
    "href": "las_slides_estan.html",
    "title": "Slides para la presentación",
    "section": "",
    "text": "Las transparencias para presentar el trabajo en grupo están aquí."
  },
  {
    "objectID": "my_slides_BigData.html#intro",
    "href": "my_slides_BigData.html#intro",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Intro",
    "text": "Intro\nEn primer lugar, analizaremos el gasto que realizan los distintos gobiernos generales de una serie de países sobre el gasto en educación; algunos países que serán objetivo de este análisis serán: el principal país será España, país sobre el que recae el trabajo y que para observar mejor cómo ha ido evolucionando su situación y todo lo demás, la compararemos con los países que conforman el G7: Estados Unidos, Reino Unido, Canadá, Italia, Francia, Japón y Alemania, además de algunos países vecinos como Portugal o Grecia, que aparte son similares a España.\nEn segundo lugar, analizaremos los resultados de las pruebas PISA, un estudio que realiza la OECD y que consta de unos exámenes que realizan los alumnos de todo el mundo cuyo objetivo no es analizar a los alumnos sino el sistema que los educa, que no es lo mismo. Estos se componen de tres campos: matemáticas, ciencia y lectura y se realizan cada 3 años en alumnos de 15 años de edad.\nPor último, detallaremos un modelo en el cual pretendemos observar si hay relación entre el gasto que realiza el gobierno en educación y las notas que se obtienen en dichas pruebas y ver si tiene correlación o no.\nEl motivo por el cual hemos elegido hacer el trabajo sobre el gasto en educación es porque hemos considerado que es una de las variables más importantes y que más influyen en el crecimiento de un país, tanto a nivel cultural, como económico y social y es una herramienta que el gobierno puede modificar a conveniencia, por lo tanto, es una herramiento muy importante y poderosa."
  },
  {
    "objectID": "my_slides_BigData.html#los-pingüinos-molan",
    "href": "my_slides_BigData.html#los-pingüinos-molan",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Los pingüinos molan",
    "text": "Los pingüinos molan\nVamos a ver una foto de un pingüinos\n\n\n\n\nUn pingüino chulo"
  },
  {
    "objectID": "my_slides_BigData.html#algunos-gráficos",
    "href": "my_slides_BigData.html#algunos-gráficos",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Algunos gráficos",
    "text": "Algunos gráficos\nBueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes\n\nlibrary(tidyverse)\n\nArreglo los datos\n\n#- cojos datos de pingüinos y arreglo un poco \ndf <- palmerpenguins::penguins %>% \n  dplyr::select(species, bill_depth_mm, body_mass_g) %>% \n  tidyr::drop_na()"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Javier Ruiz Puchol",
    "section": "",
    "text": "Trabajo elaborado para la asignatura “Programación y manejo de datos en la era del Big Data” de la Universitat de València durante el curso 2022-2023. El repo del trabajo está aquí.\nLa web de la asignatura está aquí y los trabajos de mis compañeros de curso puedes verlos aquí.\nEste trabajo lleva por título ““Análisis de la Industria Musical: Spotify”, trata sobre la elaboración de una serie de métricas y gráficos que miden el éxito de los artistas dentro de la plataforma de streaming. Entre estas métricas se incluye el número total de reproducciones, veces en el top 1, dias desde el lanzamiento y otros valores sobre las canciones más escuchadas del mundo.\nEl trabajo puede verse aquí."
  },
  {
    "objectID": "my_trabajo_BigData.html#analisis-de-datos",
    "href": "my_trabajo_BigData.html#analisis-de-datos",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Analisis de datos",
    "text": "Analisis de datos\n\n\nMates\nLectura\nCiencia\nTabla\n\n\n\nEn la prueba de matemáticas, el quinto mejor es Corea del sur, con una media de 539,4 y el mas cercano de los vecinos de España es Francia, con 495,2 y España con 483,2 por debajo de Portugal. Siendo el mejor Singapur con 564 de media, la diferencia es increíble, segundo Hong Kong y tercero Macao.\n\nCódigo#españa  y sus vecinos junto a los mejores 5 mejores de mates\nz<-full_join(VECINOS, mejores_mates)\nz <- z %>% \n  mutate(media_mate = forcats::as_factor(media_mates), media_lecture = forcats::as_factor(media_lectura), media_cience = forcats::as_factor(media_ciencias)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                     origin = \"iso3c\", \n                                                                                     destination = \"iso2c\", warn = FALSE))\n\n\nz %>%\n  arrange(media_mates) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_matef=factor( media_mates, levels=media_mate)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_matef))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +labs(title='Los 5 mejores en matemáticas', \n                   subtitle='junto a España y sus vecinos', \n                   caption='Fuente: OCDE',\n                  x= \"Paises\", y='Notas')+theme_bw()\n\n\n\n\n\n\n\n\n\nEn la prueba de Lectura, el quinto mejor es Canadá con 524,2 luego observamos a Francia con 496,2 que esta vez la distancia es mucho menor, luego tenemos a Portugal que supera a España por casi 7 puntos y les siguen Italia y Grecia. El mejor en esta prueba vuelve a ser Singapur con 535, segundo Corea y tercero Finlandia.\n\nCódigo#españa  y sus vecinos junto a los mejores 5 mejores de lectura\nza<-full_join(VECINOS, mejores_lectura)\nza <-za %>% \n  mutate( media_lecture = forcats::as_factor(media_lectura)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                                                                                                                           origin = \"iso3c\", \n                                                                                                                                                                                           destination = \"iso2c\", warn = FALSE))\n\nza %>%\n  arrange(media_lecture) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_lecturef=factor( media_lectura, levels=media_lecture)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_lecturef))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +\n  theme_bw()  +labs(title='Los 5 mejores en Lectura', \n                     subtitle='junto a España y sus vecinos', \n                     caption='Fuente: OCDE',\n                     x= \"Paises\", y='Notas')\n\n\n\n\n\n\n\n\n\nEn la prueba de Ciencias, el quinto mejor es Taiwan, con una media de 532, luego observamos a Francia con 496 y España con 491,25 superando a Portugal, Italia y a Grecia. El mejor en esta prueba vuelve a ser Singapur con 556, segundo Finlandia y tercero Japón.\n\nCódigo# España  y sus vecinos junto a los mejores 5 mejores de ciencia\nzb<-full_join(VECINOS, mejores_ciencias)\nzb <-zb %>% \n  mutate( media_ciencie = forcats::as_factor(media_ciencias)) %>% mutate(iso2 = countrycode(sourcevar = LOCATION, \n                                                                                            origin = \"iso3c\", \n                                                                                            destination = \"iso2c\", warn = FALSE))\n\nzb %>%\n  arrange(media_ciencias) %>%    # First sort by val. This sort the dataframe but NOT the factor levels\n  mutate(media_ciencief=factor( media_ciencias, levels=media_ciencie)) %>%   # This trick update the factor levels\n  ggplot( aes(x=LOCATION, y=media_ciencief))+ \n  geom_flag( aes(image = iso2))+\n  geom_segment(aes(xend=LOCATION, yend=0))+\n  coord_flip() +\n  theme_bw() +labs(title='Los 5 mejores en Ciencias', \n                   subtitle='junto a España y sus vecinos', \n                   caption='Fuente: OCDE',\n                   x= \"Paises\", y='Notas')\n\n\n\n\n\n\n\n\n\nComo podemos observar, España y sus vecinos están muy lejos de estar entre los mejores de cada prueba, pudiendo destacar que Francia es superior en todas las pruebas si lo comparamos con España,Grecia, Italia y Portugal.\n\nCódigodf_flags <- w %>% #- fips\n  mutate(iso2 = countrycode(sourcevar = LOCATION, \n                            origin = \"iso3c\", \n                            destination = \"iso2c\", warn = FALSE)) %>% \n  mutate(iso2 = tolower(iso2)) %>% \n  # glue:glue() : pega texto con \"código\", con objetos de R: los objetos tienen que ir entre corchetes {}\n  mutate(flag_URL = glue::glue('https://hatscripts.github.io/circle-flags/flags/{iso2}.svg'), .before=LOCATION) \ntt_flags <- df_flags%>% select(-6) %>% gt()\n\n\ntt_flags <- tt_flags %>% tab_header(title = md(\"**España junto a sus vecinos y los 9 Paises con mejores medias en las pruebas Pisa**\"),\n                                subtitle = md(\"Datos de *Hombres y Mujeres*\"))\n\ntt_flags <- tt_flags %>% cols_label(media_mates = md(\"**Matemáticas**\"), LOCATION= md(\"**Paises**\"), media_ciencias = md(\"**Ciencias**\"), media_lectura = md(\"**Lectura**\"),flag_URL = md(\"**Banderas**\")) \ntt_flags <- tt_flags %>% \n  fmt_number(columns = c(media_mates, media_ciencias, media_lectura),\n             decimals =2, \n             sep_mark = \".\", \n             dec_mark = \",\") \n\ntabla<- tt_flags %>% \n  gt::text_transform(locations = cells_body(columns = c(flag_URL)), \n                     fn = function(x){gt::web_image(x, height = 30)})\ntabla<- tabla %>% opt_stylize(style = 1, color = \"red\")  #- red\ntabla\n\n\n\n\n\n\n\nEspaña junto a sus vecinos y los 9 Paises con mejores medias en las pruebas Pisa\n    \n\nDatos de Hombres y Mujeres\n\n    \n\n\nBanderas\n      Paises\n      Matemáticas\n      Ciencias\n      Lectura\n    \n\n\n\nESP\n483,25\n491,25\n481,50\n\n\n\nFRA\n495,20\n496,00\n496,20\n\n\n\nGRC\n456,60\n463,40\n468,80\n\n\n\nITA\n481,40\n481,40\n481,20\n\n\n\nPRT\n484,80\n489,80\n487,80\n\n\n\nSGP\n564,00\n556,00\n535,00\n\n\n\nHKG\n548,00\n523,00\n527,00\n\n\n\nMAC\n544,00\n529,00\n509,00\n\n\n\nTWN\n542,00\n532,00\n497,00\n\n\n\nKOR\n539,40\n526,60\n532,40\n\n\n\nFIN\n525,20\n543,00\n530,60\n\n\n\nJPN\n529,40\n536,80\n515,20\n\n\n\nEST\n518,20\n532,80\n512,00\n\n\n\nCAN\n520,00\n526,80\n524,20\n\n\n\n\n\n\n\n\n\nPodemos observar que existe una notable diferencia entre los países asiáticos y los europeos, el único país europeo que podemos apreciar que se encuentra entre los mejores es Finlandia. España está muy por debajo y entre los cinco 4 vecinos que hemos escogido podemos ver que en dos de las tres pruebas, España se encuentra peor que Francia y que Portugal."
  },
  {
    "objectID": "my_trabajo_BigData.html#división-del-gasto-en-educación",
    "href": "my_trabajo_BigData.html#división-del-gasto-en-educación",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "División del gasto en educación",
    "text": "División del gasto en educación\nUn motivo que podría explicar los malos resultados que obtiene España podría ser que el gasto en educación no esta bien repartido entre las distintas etapas educativas o incluso se aplique un sistema educativo obsoleto y poco eficaz.\n\n\n\n\n\n\n\n\n\nPor eso vamos a desglosar el gasto en educación en tres ramas: educación infantil, educación primaria y secundaria y educación terciaria y ponerlas en una gráfica.\n\nCódigoeducacion_segmento <- read.csv(\"datos/Datos_educacion_completo.csv\")\n\neduc_2 <- educacion_segmento %>% \n  rename(Pais = LOCATION, Año = TIME, Valor = Value, Etapa_educativa = SUBJECT) %>% \n  select(-c(FREQUENCY, Flag.Codes, INDICATOR, MEASURE)) %>%\n  filter(Año >= 2008) %>%\n  drop_na() %>%\n  filter(Pais %in% c(\"GBR\",\"CAN\",\"JPN\",\"ESP\",\"USA\",\"ITA\",\"DEU\",\"FRA\",\"PRT\",\"GRC\")) %>%\n  mutate(Educacion = forcats::fct_recode(Etapa_educativa,\n                                         \"Educación infantil\" = \"EARLYCHILDEDU\",\n                                         \"Primaria y Secundaria\" = \"PRY_NTRY\", \n                                         \"Educación Terciaria\"  = \"TRY\")) %>%\n  select(-Etapa_educativa)\n\n\n\nbb <- educ_2 %>%\n  ggplot(aes(x= Año, y= Valor)) + \n  labs(title = \"Evolución % gasto en educación/PIB\",\n       x = \"Año\",\n       y = \"Gasto\",\n       color = \"Países\") +\n  geom_point(aes(color= Pais), size= 1.75) +\n  geom_line(aes(color= Pais), size= 1) + scale_color_manual(values= c(\"coral1\", \"tan4\", \"yellow\", \"blue\", \"red\", \"orange\", \"green3\", \"darkmagenta\",\"green4\",\"cyan1\")) +\n  theme_minimal() + facet_wrap(\n    vars(Educacion), nrow = 1, ncol = 3,scales = \"free\") + theme(axis.line = element_line(size = 0.6,\n                                                                                          linetype = \"solid\"), axis.ticks = element_line(colour = \"gray14\",\n                                                                                                                                         linetype = \"dotdash\"), panel.grid.major = element_line(colour = \"ivory3\",\n                                                                                                                                                                                                size = 0.4, linetype = \"dotted\"), panel.grid.minor = element_line(linetype = \"blank\"),\n                                                                 axis.title = element_text(family = \"serif\"),\n                                                                 axis.text = element_text(face = \"italic\",\n                                                                                          colour = \"gray24\"), plot.title = element_text(family = \"serif\",\n                                                                                                                                        size = 15, hjust = 0.5), legend.text = element_text(size = 7,\n                                                                                                                                                                                            family = \"serif\"), legend.title = element_text(size = 11,\n                                                                                                                                                                                                                                           face = \"bold\", family = \"serif\"),\n                                                                 panel.background = element_rect(fill = \"cornsilk1\",\n                                                                                                 linetype = \"solid\"), plot.background = element_rect(fill = \"blanchedalmond\",\n                                                                                                                                                     colour = NA, linetype = \"solid\"),\n                                                                 legend.key = element_rect(fill = NA),\n                                                                 legend.background = element_rect(fill = NA)) +labs(title = \"Evolución del gasto en educación sobre el PIB\",\n                                                                                                                    x = \"Años\", y = \"% Gasto educación/PIB\",\n                                                                                                                    \n                                                                                                                    caption = \"Datos de la OECD\") + theme(plot.subtitle = element_text(size = 3)) + theme(axis.text = element_text(size = 7,\n                                                                                                                                                                                                                                   hjust = 0.1)) + scale_x_continuous(\n                                                                                                                                                                                                                                     breaks = seq(2008, 2019, 1),\n                                                                                                                                                                                                                                     limits = c(2008, 2019)) + theme(axis.text = element_text(size = 5)) + labs(x = NULL) + labs(y = NULL) + theme(plot.subtitle = element_text(size = 7)) + theme(plot.caption = element_text(size = 6)) + theme(plot.caption = element_text(hjust = 1.075))\n\nbb \n\n\n\n\n\n\n\nSi observamos detenidamente el gráfico, se ve que la inversión que realizan en educación terciaria o superior, países como Estados Unidos, Reino Unido o Japón, es decir, países muy ricos y desarrollados es superior a la inversión que realiza España, Portugal o Grecia.\nEste detalle es importante, porque la educación superior pretende formar individuos que sean capaces de impulsar el desarrollo económico y social de un país.\nTambién se ve que el gasto en la etapa de secundaria y primaria, es superior también, lo que podría traducirse en mejores resultados en las pruebas PISA, aunque no necesariamente como veremos más adelante."
  },
  {
    "objectID": "my_slides_BigData.html#motivaciones",
    "href": "my_slides_BigData.html#motivaciones",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Motivaciones",
    "text": "Motivaciones\n\nImportancia de la variable a estudiar “Gasto en educación\nContenido adecuado a lo estudiado durante la carrera\nDescubrir si existe relación entre el gasto en educación y los resultados de las pruebas PISA"
  },
  {
    "objectID": "my_slides_BigData.html#datos-del-trabajo",
    "href": "my_slides_BigData.html#datos-del-trabajo",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "Datos del trabajo",
    "text": "Datos del trabajo"
  },
  {
    "objectID": "my_trabajo_BigData.html#conclusiones",
    "href": "my_trabajo_BigData.html#conclusiones",
    "title": "Análisis de la Industria Musical: Spotify",
    "section": "Conclusiones",
    "text": "Conclusiones\nLa era digital ha transformado por completo la comercialización de la música, aumentando la posibilidad de popularizarla a niveles nunca vistos. Spotify, como plataforma de streaming, lo ha aprovechado y ha permitido a muchos artistas expandirse por el globo.\nAún así, no todos lo han hecho en la misma medida, encontramos autores como Drake o Post Malone que se han posicionado por encima del resto durante estos años.\nPor otra parte, estas diferencias también se ven acentuadas por el público objetivo de cada artista, llevando así a grandes diferencias entre las industrias musicales de cada país influidas por motivos socioculturales."
  },
  {
    "objectID": "my_trabajo_BigData.html#total-de-streams",
    "href": "my_trabajo_BigData.html#total-de-streams",
    "title": "Análisis de la Industria Musical: Spotify",
    "section": "Total de streams:",
    "text": "Total de streams:\nEstos son los temas que más lo han ‘petado’ en la historia de Spotify.\n\nCódigo# PRIMERO CARGAMOS LOS DATOS QUE POSTERIORMENTE TRANSFORMAREMOS PARA PODER ANALIZARLOS MEJOR\n\ntop10mil <- read_csv(\"./datos/Spotify_final_dataset.csv\")\n\n\n#AHORA LOS TRANSFORMAMOS \ntop10mil <- top10mil %>% dplyr::rename(Artist_Name = `Artist Name`, Song_Name = `Song Name`, Total_Streams = `Total Streams`)\n\n\ntopsongs <- top10mil %>%\n  select(`Total_Streams`, `Artist_Name`, `Song_Name`) %>%  slice_max(n=10, order_by = `Total_Streams`, with_ties = TRUE)\n\n\ntops <- ggplot(topsongs, aes(x=reorder(Song_Name, Total_Streams), y=Total_Streams, fill = Artist_Name)) + geom_bar(stat=\"identity\",position=\"dodge\") + coord_flip() + labs(title = \"TOP 10\", \n                    subtitle = \"Canciones más escuchadas en Spotify\",\n                    x = \"Canciones\",\n                    y = \"Número de Streams\",\n                    color = \"Artistas\") + theme(axis.line = element_line(linetype = \"solid\"),\n    axis.text = element_text(family = \"serif\"),\n    plot.title = element_text(size = 16),\n    panel.background = element_rect(fill = \"white\"),\n    plot.background = element_rect(fill = \"white\",\n        colour = NA), legend.background = element_rect(fill = \"gray90\"))\ntops +labs(fill = \"Artistas\")\n\n\n\n\n\n\n\nEl track más escuchado es la banda sonora de Sunflower Spider-Man: Into the Spider-Verse con un total de 883.369.738 streams. La canción está protagonizada por Post Malone (tambien colabora Swae Lee) quién además tiene otra canción en el top 5 de más escuchas : Rockstar."
  },
  {
    "objectID": "my_trabajo_BigData.html#bibliografia",
    "href": "my_trabajo_BigData.html#bibliografia",
    "title": "Análisis de la Industria Musical: Spotify",
    "section": "Bibliografia",
    "text": "Bibliografia\nSpotify Top 10000 Streamed Songs. (2023, 2 enero). Kaggle. https://www.kaggle.com/datasets/rakkesharv/spotify-top-10000-streamed-songs\nOpen AI. (2022). Open AI. Obtenido de https://chat.openai.com/chat"
  },
  {
    "objectID": "my_slides_BigData.html",
    "href": "my_slides_BigData.html",
    "title": "La evolución del gasto en educación en España y su relación con las pruebas PISA",
    "section": "",
    "text": "Introducción\nAnálisis de gasto en educación\nPruebas PISA\nModelo de regresión\nConclusiones\n\n\n\n\n\nImportancia de la variable a estudiar “Gasto en educación\nContenido adecuado a lo estudiado durante la carrera\nDescubrir si existe relación entre el gasto en educación y los resultados de las pruebas PISA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes\n\n\nCódigo\nlibrary(tidyverse)\n\n\nArreglo los datos\n\n\nCódigo\n#- cojos datos de pingüinos y arreglo un poco \ndf <- palmerpenguins::penguins %>% \n  dplyr::select(species, bill_depth_mm, body_mass_g) %>% \n  tidyr::drop_na()\n\n\n\n\n\n\n\nCódigo\n#- primer gráfico\np <- ggplot(data = df, \n       mapping = aes(x = bill_depth_mm, y = body_mass_g, color = species)) +\n     geom_point()\np\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCódigo\n#- segundo gráfico\np <- p + geom_smooth(method = \"lm\", se = FALSE) \n\np\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCódigo\n#- tercer gráfico\np + geom_smooth(method = \"lm\", se = FALSE, color = \"black\")"
  }
]